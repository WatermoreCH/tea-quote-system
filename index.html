<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>èŒ¶åŒ¯å…¬å¸ | å°ˆæ¥­èŒ¶åŒ… OEM å®¢è£½åŒ–å ±åƒ¹ç³»çµ±</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&display=swap" rel="stylesheet">
    <style>
        [x-cloak] { display: none !important; }
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #f4f6f3; scroll-behavior: smooth; }
        .hero-spotlight { background: radial-gradient(circle at 20% 30%, rgba(197, 160, 89, 0.2) 0%, transparent 50%), radial-gradient(circle at 80% 70%, rgba(197, 160, 89, 0.15) 0%, transparent 40%), #1A302B; }
        .text-glow-gold { text-shadow: 0 0 30px rgba(197, 160, 89, 0.6); }
        .gold-value-block { background: linear-gradient(145deg, #D4B475 0%, #C5A059 100%); box-shadow: inset 0 1px 1px rgba(255,255,255,0.4), 0 20px 40px -10px rgba(197, 160, 89, 0.4); }
        .cta-destructive { background: linear-gradient(180deg, #FFD98E 0%, #C5A059 100%); box-shadow: 0 15px 35px -5px rgba(197, 160, 89, 0.6), 0 8px 0 #8E713A; transition: all 0.15s ease-out; }
        .cta-destructive:hover { transform: translateY(-4px); box-shadow: 0 20px 40px -5px rgba(197, 160, 89, 0.7), 0 10px 0 #8E713A; }
        .card-active { border: 4px solid #1A302B !important; background-color: #fffdf5 !important; box-shadow: 0 15px 30px -5px rgba(197, 160, 89, 0.3) !important; color: #1A302B !important; z-index: 20; position: relative; }
        .hover-zoom { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        .hover-zoom:hover { transform: scale(1.05); }
    </style>
</head>
<body x-data="quoteSystem()" class="text-slate-900 leading-relaxed text-base md:text-lg">

    <header class="hero-spotlight text-white py-16 md:py-32 px-6 text-center relative overflow-hidden">
        <div class="max-w-5xl mx-auto relative z-10 text-center">
            <div class="flex justify-center gap-3 mb-8 opacity-90 flex-wrap text-center">
                <span class="bg-white/10 px-4 py-1.5 rounded-full text-sm font-bold border border-white/20 whitespace-nowrap">ISO 22000 / HACCP / FDA èªè­‰</span>
            </div>
            <h1 class="text-3xl md:text-7xl font-black mb-8 leading-tight tracking-tighter">èŒ¶åŒ…å®¢è£½åŒ– <span class="text-[#C5A059] text-glow-gold">æ­£å¼å ±åƒ¹</span> ç³»çµ±</h1>
            <p class="text-base md:text-2xl text-slate-300 font-medium max-w-3xl mx-auto leading-relaxed">çœç•¥ç„¡æ•ˆè©¢å•ï¼Œç²å–å…·å‚™æ¡è³¼æ¨™æº–èˆ‡æ³•å¾‹æ•ˆåŠ›çš„æ­£å¼å ±åƒ¹å–®ã€‚</p>
        </div>
    </header>

    <main class="max-w-7xl mx-auto py-12 px-4 md:px-6">
        
        <section class="mb-16">
            <h2 class="text-2xl md:text-4xl font-black text-slate-900 text-center mb-10">æ­¥é©Ÿä¸€ï¼šæ‚¨çš„å“ç‰Œç¶“ç‡Ÿéšæ®µ</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <template x-for="stage in stages" :key="stage.id">
                    <button @click="selectStage(stage)" :class="selectedStageId === stage.id ? 'card-active scale-105' : 'bg-white border border-gray-200'" class="p-8 rounded-[2rem] text-center transition-all relative group flex flex-col items-center overflow-hidden shadow-sm">
                        <div x-show="stage.recommended" class="absolute top-0 right-0 bg-[#C5A059] text-[#1A302B] text-xs px-4 py-1.5 rounded-bl-2xl font-black">æ¨è–¦æ–¹æ¡ˆ</div>
                        <div class="text-5xl mb-6" x-text="stage.icon"></div>
                        <h3 class="text-xl md:text-2xl font-black mb-3" x-text="stage.name"></h3>
                        <p class="text-slate-600 text-base md:text-lg leading-relaxed" x-text="stage.desc"></p>
                    </button>
                </template>
            </div>
        </section>

        <div class="grid grid-cols-1 lg:grid-cols-12 gap-10 items-start">
            <div class="lg:col-span-7 space-y-10">
                
                <div class="bg-white p-8 md:p-12 rounded-[2.5rem] shadow-sm border border-slate-100">
                    <h2 class="text-xl md:text-2xl font-black mb-8 flex items-center"><span class="bg-slate-900 text-white w-8 h-8 rounded-full inline-flex items-center justify-center mr-4 text-sm font-black">02</span>é¸æ“‡å®¢è£½ç­‰ç´š</h2>
                    <div class="grid grid-cols-2 md:grid-cols-5 gap-3">
                        <template x-for="plan in allPlans" :key="plan.id">
                            <div class="relative">
                                <button @click="selectPlan(plan)" :class="selectedPlanId === plan.id ? 'card-active scale-105' : (plan.id === 'C' ? 'border-[#C5A059] bg-[#FFFDF5]' : getPlanBg(plan.id)) + ' border-transparent'" class="w-full py-6 px-1 rounded-xl transition-all text-center text-sm md:text-base border-4 flex flex-col items-center justify-center min-h-[130px]">
                                    <div class="text-[10px] md:text-xs opacity-80 font-black mb-1 uppercase">æ–¹æ¡ˆ <span x-text="plan.id"></span></div>
                                    <div class="font-black leading-tight"><span x-text="plan.name"></span></div>
                                    <div class="text-[10px] md:text-xs mt-2 opacity-80 whitespace-normal font-bold">èµ·è¨‚: <span x-text="plan.moq"></span></div>
                                </button>
                                <template x-if="plan.id === 'C'"><div class="absolute -bottom-3 left-1/2 -translate-x-1/2 bg-[#C5A059] text-[#1A302B] text-[10px] md:text-xs px-3 py-1 rounded-full font-black shadow-md whitespace-nowrap z-10">æœ€å—æ­¡è¿ â­</div></template>
                            </div>
                        </template>
                    </div>
                </div>

                <div class="bg-white p-8 md:p-12 rounded-[2.5rem] shadow-sm border border-slate-100">
                    <h2 class="text-xl md:text-2xl font-black mb-8 flex items-center text-center"><span class="bg-slate-900 text-white w-8 h-8 rounded-full inline-flex items-center justify-center mr-4 text-sm font-black">03</span>èŒ¶åŒ…å…§è¢‹æè³ª</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 ml-0 md:ml-12">
                        <template x-for="mat in materials" :key="mat.name">
                            <button @click="selectedMaterial = mat" :class="selectedMaterial.name === mat.name ? 'card-active ring-2' : getMatBg(mat.type) + ' border-transparent text-slate-700'" class="p-5 rounded-2xl text-left transition-all border-4 flex flex-col justify-between min-h-[110px]">
                                <div class="flex justify-between items-center mb-2"><span class="font-black text-base md:text-lg" x-text="mat.name"></span><span :class="selectedMaterial.name === mat.name ? 'bg-slate-900 text-white' : 'bg-white/50 text-slate-800'" class="text-xs px-2 py-0.5 rounded font-black uppercase" x-text="mat.type"></span></div>
                                <div class="text-[#1A302B] font-black text-lg md:text-xl">+ æ¯åŒ… <span x-text="mat.surcharge.toFixed(1)"></span> å…ƒ</div>
                            </button>
                        </template>
                    </div>
                </div>

                <div class="bg-white p-8 md:p-12 rounded-[2.5rem] shadow-sm border border-slate-100">
                    <h2 class="text-xl md:text-2xl font-black mb-8 flex items-center"><span class="bg-slate-900 text-white w-8 h-8 rounded-full inline-flex items-center justify-center mr-4 text-sm font-black">04</span>åŒ…è£çµæ§‹èˆ‡ä¸‹è¼‰</h2>
                    <div class="ml-0 md:ml-12">
                        <div x-show="canBox" class="bg-slate-900 text-white p-8 rounded-[2.5rem] flex flex-col md:flex-row gap-8 items-center text-left mb-10">
                            <div class="flex-1 space-y-4"><div class="bg-[#C5A059] text-[#1A302B] px-4 py-1.5 rounded-full text-sm font-black inline-block uppercase tracking-widest" x-text="boxName"></div><ul class="text-sm md:text-lg space-y-2 text-slate-400 font-medium"><li>â€¢ å°ºå¯¸ï¼š10 Ã— 10 Ã— 11.5 cm</li><li>â€¢ æè³ªï¼šç™½å¡ 45T / éœ§è†œè™•ç†</li></ul></div>
                            <div class="flex flex-col items-center gap-3"><a href="https://www.bpbpack.com.tw/products/3a14-16006" target="_blank" class="bg-white/10 p-2 rounded-3xl border border-white/20 hover-zoom shadow-2xl group cursor-pointer relative"><div class="w-32 h-32 md:w-40 md:h-40 bg-white rounded-2xl flex items-center justify-center p-2"><img src="https://www.bpbpack.com.tw/archive/products/item/3a14-16006/3a14-16006_01.jpg" class="w-full h-full object-contain"></div></a><p class="text-[10px] text-[#C5A059] font-black">é»æ“ŠæŸ¥çœ‹å°ˆæ¥­ç›’å‹è¦æ ¼</p></div>
                        </div>
                        <div class="pt-8 border-t border-slate-100 text-left">
                            <p class="text-xs font-black text-slate-400 uppercase tracking-widest mb-4">è¨­è¨ˆç”¨åˆ€æ¨¡ä¸‹è¼‰ / Templates</p>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <a href="https://drive.google.com/uc?export=download&id=1NJ1KLuRwE_eFzVCnb1qX1tD2uFF6JFKL" class="flex items-center justify-between p-4 bg-slate-50 rounded-2xl border border-slate-200 hover:border-slate-400 transition-all group"><div><p class="text-[10px] text-slate-400 font-bold">å¤–è¢‹ç©ºç™½åˆ€æ¨¡</p><p class="text-sm font-black">105 Ã— 90 mm</p></div><span class="text-[10px] bg-slate-900 text-white px-3 py-1 rounded-full group-hover:bg-[#C5A059]">ä¸‹è¼‰ .AI</span></a>
                                <a href="https://drive.google.com/uc?export=download&id=1w85ERYJze6K_HWoYHO_aovvyEGBRWgXc" class="flex items-center justify-between p-4 bg-slate-50 rounded-2xl border border-slate-200 hover:border-slate-400 transition-all group"><div><p class="text-[10px] text-slate-400 font-bold">ä¸Šæ€ç›’(M) åˆ€æ¨¡</p><p class="text-sm font-black">å°æ‡‰è·åŒ…è¢‹</p></div><span class="text-[10px] bg-slate-900 text-white px-3 py-1 rounded-full group-hover:bg-[#C5A059]">ä¸‹è¼‰ .PDF</span></a>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="bg-white p-8 md:p-12 rounded-[2.5rem] shadow-sm border border-slate-100">
                    <h2 class="text-xl md:text-2xl font-black mb-8 flex items-center text-center"><span class="bg-slate-900 text-white w-8 h-8 rounded-full inline-flex items-center justify-center mr-4 text-sm font-black">05</span>è¨­å®šè¨‚è³¼æ•¸é‡</h2>
                    <div class="grid grid-cols-3 md:grid-cols-5 gap-3 ml-0 md:ml-12">
                        <template x-for="qty in qtyOptions" :key="qty"><button @click="quantity = qty" x-show="qty >= minMoq" :class="quantity === qty ? 'bg-slate-900 text-white font-black' : 'bg-slate-100 text-slate-400'" class="py-4 text-base rounded-xl transition-all shadow-sm" x-text="qty.toLocaleString()"></button></template>
                    </div>
                </div>
            </div>

            <aside class="lg:col-span-5 sticky top-8">
                <div class="bg-[#1A302B] rounded-[2.5rem] p-8 md:p-12 text-white shadow-2xl relative overflow-hidden">
                    <div class="absolute -top-10 -right-10 w-40 h-40 bg-[#C5A059] opacity-10 rounded-full blur-3xl"></div>
                    <h3 class="text-xs md:text-sm font-black tracking-widest text-[#C5A059] mb-10 uppercase text-center">å ±åƒ¹æ˜ç´°ç¸½çµ</h3>
                    <div class="space-y-6 text-base font-medium mb-10">
                        <div class="flex justify-between border-b border-white/10 pb-4"><span class="opacity-60">é¸è³¼æ–¹æ¡ˆ</span><span class="font-black" x-text="'æ–¹æ¡ˆ ' + selectedPlanId"></span></div>
                        <div class="flex justify-between border-b border-white/10 pb-4"><span class="opacity-60">å…§è¢‹åŠ åƒ¹</span><span class="text-[#C5A059] font-black" x-text="'+ NT$ ' + selectedMaterial.surcharge"></span></div>
                    </div>
                    <div class="gold-value-block p-8 rounded-[2rem] text-[#1A302B] mb-10">
                        <div class="flex justify-between items-end mb-8"><span>æœ€çµ‚å–®åƒ¹</span><span class="text-3xl md:text-6xl font-black" x-text="'NT$ ' + finalUnitPrice"></span></div>
                        <div class="pt-8 border-t border-[#1A302B]/20"><span>å°ˆæ¡ˆé ä¼°ç¸½é¡</span><div class="text-4xl md:text-6xl font-black">NT$ <span x-text="totalPrice.toLocaleString()"></span></div></div>
                    </div>
                    <button @click="showForm = true; $nextTick(() => document.getElementById('form-section').scrollIntoView({behavior:'smooth'}))" class="cta-destructive w-full text-[#1A302B] py-8 rounded-[2.5rem] font-black text-xl md:text-3xl tracking-widest">ç”¢å‡ºæ­£å¼å ±åƒ¹å–®</button>
                    <p class="text-center text-[10px] opacity-40 font-black mt-4 px-4 uppercase tracking-widest">èŒ¶åŒ¯å…¬å¸ OEM è‡ªåŠ©å ±åƒ¹ç³»çµ±é©—è­‰</p>
                </div>
            </aside>
        </div>

        <section id="form-section" x-show="showForm" x-transition class="mt-24 max-w-4xl mx-auto pb-32">
            <div class="bg-[#1A302B] text-white p-8 rounded-t-[4rem] text-center border-b border-[#C5A059]/30">
                <p class="text-lg md:text-2xl font-black leading-relaxed">ç›®å‰è¨­å®šè¦æ ¼å°‡ä½œç‚ºæ­£å¼ç”Ÿç”¢ä¾æ“šã€‚<br>PDF å ±åƒ¹å–®ç”¢å‡ºå¾Œï¼Œè¦æ ¼å°‡é€²å…¥é–å®šæµç¨‹ã€‚</p>
                <p class="text-sm text-[#C5A059] font-bold mt-4">å¦‚éœ€æ›´æ”¹ï¼Œéœ€é‡æ–°å»ºç«‹ä¸€ä»½æ–°å ±åƒ¹ã€‚</p>
            </div>
            <div class="bg-white p-12 rounded-b-[4rem] shadow-2xl border border-slate-100 text-left">
                <form @submit.prevent="handleSubmit" class="space-y-10">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-10">
                        <div class="space-y-4"><label class="text-base font-black text-slate-800">å…¬å¸æŠ¬é ­ / çµ±ç·¨ *</label><input type="text" x-model="formData.company" required class="w-full px-8 py-5 bg-slate-50 border-none rounded-2xl focus:ring-4 focus:ring-[#C5A059]/40 font-bold" placeholder="è¼¸å…¥å…¬å¸åç¨±"></div>
                        <div class="space-y-4"><label class="text-base font-black text-slate-800">è¯çµ¡äººå§“å *</label><input type="text" x-model="formData.name" required class="w-full px-8 py-5 bg-slate-50 border-none rounded-2xl focus:ring-4 focus:ring-[#C5A059]/40 font-bold" placeholder="æ‚¨çš„çœŸå¯¦å§“å"></div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-10">
                        <div class="space-y-4"><label class="text-base font-black text-slate-800">æ¥æ”¶å ±åƒ¹ä¹‹ Email *</label><input type="email" x-model="formData.email" required class="w-full px-8 py-5 bg-slate-50 border-none rounded-2xl focus:ring-4 focus:ring-[#C5A059]/40 font-bold" placeholder="å ±åƒ¹å–®å°‡å¯„é€è‡³æ­¤"></div>
                        <div class="space-y-4"><label class="text-base font-black text-slate-800">è¯çµ¡é›»è©± / LINE *</label><input type="text" x-model="formData.contact" required class="w-full px-8 py-5 bg-slate-50 border-none rounded-2xl focus:ring-4 focus:ring-[#C5A059]/40 font-bold" placeholder="ä»¥ä¾¿é¡§å•ç¢ºèªç”Ÿç”¢ç´°ç¯€"></div>
                    </div>
                    <div class="text-center">
                        <button type="submit" :disabled="loading" class="w-full bg-slate-900 text-white py-8 rounded-[2.5rem] font-black text-2xl md:text-4xl shadow-2xl hover:bg-black transition-all flex justify-center items-center">
                            <span x-show="!loading">ç¢ºèªè¦æ ¼ä¸¦å¯„é€å ±åƒ¹å–®</span>
                            <span x-show="loading" class="flex items-center"><svg class="animate-spin h-8 w-8 mr-4 text-[#C5A059]" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>å»ºç«‹æ­£å¼å ±åƒ¹ç·¨è™Ÿä¸­...</span>
                        </button>
                        <p class="mt-6 text-sm text-slate-400 font-bold text-center">ã€Œæ­¤å ±åƒ¹å–®å¯ä½œç‚ºå…§éƒ¨è«‹è³¼ã€å°å¸³èˆ‡æ¡è³¼ä¾æ“šã€</p>
                    </div>
                </form>
            </div>
        </section>
    </main>

    <div x-show="showSuccess" class="fixed inset-0 bg-slate-900/95 backdrop-blur-3xl flex items-center justify-center z-50 p-6" x-cloak x-transition>
        <div class="bg-white rounded-[4rem] p-12 md:p-16 max-w-2xl w-full text-center relative shadow-2xl overflow-y-auto max-h-[90vh]">
            <div class="w-20 h-20 bg-[#C5A059]/10 text-[#C5A059] rounded-full flex items-center justify-center mx-auto mb-6 text-5xl">âœ“</div>
            <h3 class="text-3xl md:text-5xl font-black text-slate-900 mb-2">æ­£å¼å ±åƒ¹å–®å·²å®Œæˆå»ºç«‹</h3>
            <p class="text-[#C5A059] font-black text-lg md:text-2xl mb-8">ç·¨è™Ÿï¼š<span x-text="quoteNumber"></span></p>
            <p class="text-slate-600 mb-10 text-sm md:text-base font-bold">å°ˆå±¬åŠ å¯† PDF å·²å¯„é€è‡³ä¿¡ç®±ï¼Œæœ‰æ•ˆæœŸ 14 å¤©ã€‚</p>

            <div class="mt-8 p-6 bg-slate-50 rounded-[2rem] border-2 border-dashed border-slate-200 text-left" x-data="{ uploadLoading: false, uploadDone: false, fileName: '' }">
                <h4 class="font-black text-slate-900 mb-2">ä¸Šå‚³è¨­è¨ˆç¨¿ / Upload Design</h4>
                <p class="text-[10px] md:text-xs text-slate-500 mb-4 font-medium leading-relaxed">è«‹ä¾åˆ€æ¨¡å®Œæˆè¨­è¨ˆå¾Œä¸Šå‚³ã€‚ä¸€ç¶“ä¸Šå‚³ï¼Œå³è¦–ç‚ºæ‰“æ¨£èˆ‡ç”Ÿç”¢ä¾æ“šã€‚</p>
                <div class="space-y-4">
                    <input type="file" id="designFile" @change="fileName = $event.target.files[0].name" accept=".ai,.pdf,.zip" class="hidden">
                    <div class="flex items-center gap-3">
                        <button type="button" @click="document.getElementById('designFile').click()" :disabled="uploadLoading || uploadDone" class="bg-white border border-slate-300 text-slate-700 px-4 py-2 rounded-xl text-xs font-black hover:bg-slate-50 transition-all flex-shrink-0">é¸æ“‡æª”æ¡ˆ (.ai, .pdf)</button>
                        <span class="text-xs text-slate-400 truncate font-bold" x-text="fileName || 'å°šæœªé¸æ“‡æª”æ¡ˆ'"></span>
                    </div>
                    <button type="button" x-show="fileName && !uploadDone" @click="
                        uploadLoading = true;
                        const file = document.getElementById('designFile').files[0];
                        const reader = new FileReader();
                        reader.readAsDataURL(file);
                        reader.onload = async () => {
                            const base64 = reader.result.split(',')[1];
                            try {
                                await fetch('https://script.google.com/macros/s/AKfycbzAQ4XA5e1I2rCBjX9x7XEjA6m2qB8egcRUtFm_j_Vb3N2iQ5lm2FhhK_O--Xur_c-5/exec', {
                                    method: 'POST',
                                    mode: 'no-cors',
                                    body: JSON.stringify({
                                        action: 'uploadFile',
                                        quoteNumber: quoteNumber,
                                        fileName: file.name,
                                        fileData: base64
                                    })
                                });
                                uploadDone = true;
                            } catch (e) { alert('ä¸Šå‚³å¤±æ•—ï¼Œè«‹é‡è©¦'); } finally { uploadLoading = false; }
                        };" :disabled="uploadLoading" class="w-full bg-slate-900 text-white py-3 rounded-xl font-black text-sm hover:bg-black flex justify-center items-center">
                        <span x-show="!uploadLoading">ç¢ºèªä¸¦ä¸Šå‚³è¨­è¨ˆæª”</span>
                        <span x-show="uploadLoading" class="flex items-center"><svg class="animate-spin h-4 w-4 mr-2" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>ä¸Šå‚³ä¸­...</span>
                    </button>
                    <div x-show="uploadDone" class="bg-emerald-50 text-emerald-700 p-3 rounded-xl text-xs font-black text-center border border-emerald-100">âœ“ è¨­è¨ˆæª”å·²æˆåŠŸé—œè¯å ±åƒ¹å–®</div>
                </div>
            </div>
            <button @click="showSuccess = false; window.location.reload()" class="mt-8 text-slate-400 font-bold underline text-xs uppercase tracking-widest">äº†è§£ä¸¦çµæŸ</button>
        </div>
    </div>

    <script>
        function quoteSystem() {
            return {
                selectedStageId: 'growth', selectedPlanId: 'C', selectedPlan: {}, selectedMaterial: { name: 'å°¼é¾ï¼ˆæœ‰ç·šï¼‰', surcharge: 1.2, type: 'æœ‰ç·š' },
                quantity: 4500, showForm: false, loading: false, showSuccess: false, quoteNumber: '',
                formData: { company: '', name: '', email: '', contact: '' },
                stages: [{ id: 'startup', name: 'æ–°å‰µæ¸¬è©¦å¸‚å ´', icon: 'ğŸš€', desc: 'ä½èµ·è¨‚é‡ï¼Œæ¥µé€Ÿæ‰“æ¨£é©—è­‰æ½›åŠ›ã€‚' }, { id: 'growth', name: 'æˆé•·æ“´å¼µ', icon: 'ğŸ“ˆ', desc: 'æœ€ä½³è³ªæ„Ÿèˆ‡è¦æ¨¡æ•ˆç›Šå¹³è¡¡ã€‚', recommended: true }, { id: 'enterprise', name: 'ä¼æ¥­æ¡è³¼', icon: 'ğŸ¢', desc: 'æ¥µè‡´é‡ç”¢ï¼Œç©©å®šä¾›æ‡‰éˆæ”¯æŒã€‚' }],
                allPlans: [{ id: 'A', name: 'å–®åŒ…åŸºæœ¬', base: 5.63, moq: 550 }, { id: 'B', name: 'å–®åŒ…é€²éš', base: 5.63, moq: 550 }, { id: 'C', name: 'ç›’è£åŸºæœ¬', base: 3.00, moq: 4500, canBox: true }, { id: 'D', name: 'ç›’è£é€²éš', base: 2.80, moq: 15000, canBox: true }, { id: 'E', name: 'å®¢è£½è¦æ ¼', base: 0, moq: 'å°ˆæ¡ˆè©•ä¼°', canBox: true }],
                materials: [{ name: 'å°¼é¾ï¼ˆæœ‰ç·šï¼‰', surcharge: 1.2, type: 'æœ‰ç·š' }, { name: 'ç‰ç±³çº–ç¶­ï¼ˆæœ‰ç·šï¼‰', surcharge: 1.2, type: 'æœ‰ç·š' }, { name: 'å°¼é¾ï¼ˆç„¡ç·šï¼‰', surcharge: 1.0, type: 'ç„¡ç·š' }, { name: 'ä¸ç¹”å¸ƒï¼ˆç„¡ç·šï¼‰', surcharge: 0.7, type: 'ç„¡ç·š' }],
                qtyOptions: [500, 550, 1000, 2000, 4500, 10000, 20000],
                init() { this.selectPlan(this.allPlans[2]); },
                selectStage(stage) { this.selectedStageId = stage.id; if (stage.id === 'startup') this.selectPlan(this.allPlans[0]); if (stage.id === 'growth') this.selectPlan(this.allPlans[2]); if (stage.id === 'enterprise') this.selectPlan(this.allPlans[3]); },
                selectPlan(plan) { this.selectedPlanId = plan.id; this.selectedPlan = plan; if (typeof plan.moq === 'number' && this.quantity < plan.moq) this.quantity = plan.moq; },
                getPlanBg(planId) { const map = { 'A': 'bg-[#7F1D1D] text-white', 'B': 'bg-[#7C2D12] text-white', 'C': 'bg-[#FACC15] text-[#1A302B]', 'D': 'bg-[#064E3B] text-white', 'E': 'bg-[#0C4A6E] text-white' }; return map[planId] || 'bg-slate-100'; },
                getMatBg(type) { return type === 'æœ‰ç·š' ? 'bg-[#ECFDF5] border-[#059669]' : 'bg-[#FFF7ED] border-[#EA580C]'; },
                get canBox() { return this.selectedPlan.canBox; },
                get boxName() { return this.selectedPlanId === 'D' ? 'é€²éšæ–¹æ¡ˆï¼šä¸Šæ€ç›’ M' : 'æ¨™æº–æ–¹æ¡ˆï¼šä¸Šæ€ç›’'; },
                get minMoq() { return typeof this.selectedPlan.moq === 'number' ? this.selectedPlan.moq : 0; },
                get lowMoqSurcharge() { const q = parseInt(this.quantity); if (q >= 2000) return 0; if (q >= 1000) return 0.3; return 0.8; },
                get finalUnitPrice() { if (this.selectedPlanId === 'E') return "æ´½è©¢é¡§å•"; let total = this.selectedPlan.base + this.selectedMaterial.surcharge + this.lowMoqSurcharge; if (this.quantity >= 10000) total *= 0.9; return total.toFixed(2); },
                get totalPrice() { if (this.selectedPlanId === 'E') return 0; let product = Math.round(parseFloat(this.finalUnitPrice) * this.quantity); let fees = this.canBox ? (525 + 300) : 0; return product + fees; },
                async handleSubmit() {
                    this.loading = true;
                    const now = new Date();
                    this.quoteNumber = `QT-${now.getFullYear()}-${String(now.getMonth()+1).padStart(2,'0')}-${String(Math.floor(Math.random()*9999)).padStart(4,'0')}`;
                    const payload = { quoteNumber: this.quoteNumber, customer: this.formData, quoteDetails: { plan: `æ–¹æ¡ˆ ${this.selectedPlanId}ï½œ${this.selectedPlan.name}`, material: this.selectedMaterial.name, quantity: this.quantity, unitPrice: this.finalUnitPrice, totalPrice: this.totalPrice, boxType: this.canBox ? this.boxName : 'ç„¡' }};
                    try {
                        await fetch('ä½ çš„_GOOGLE_APPS_SCRIPT_URL', { method: 'POST', mode: 'no-cors', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
                        await new Promise(r => setTimeout(r, 2500));
                        this.showSuccess = true;
                        this.showForm = false;
                    } catch (err) { alert('ç™¼é€å¤±æ•—'); } finally { this.loading = false; }
                }
            }
        }
    </script>
</body>
</html>